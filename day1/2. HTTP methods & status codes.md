# HTTP Methods & Status Codes — The Language of REST APIs

When we build RESTful APIs (whether in Flask or any other framework), **HTTP is the foundation**.
REST isn’t just about JSON over HTTP — it’s about **using HTTP properly**: the **methods** (verbs) and **status codes** (responses).

If you get these right, your API feels intuitive, consistent, and professional. If you get them wrong, clients will struggle to consume and maintain it.

---

## Why methods & status codes matter

- HTTP methods express the **intention** of the request.
- HTTP status codes express the **outcome** of the request.

Together, they create a universal contract between client and server — independent of implementation language.

---

## The Core HTTP Methods for REST

There are many methods in the HTTP spec (OPTIONS, TRACE, CONNECT…), but in REST APIs we mostly rely on these six:

### 1. **GET** — Retrieve data

- **Semantics:** Read-only. Should not change server state.
- **Idempotent:** ✅ Yes. Multiple GETs yield the same result (unless resource itself changes).
- **Use cases:**

  - Fetch a single resource: `/api/customers/42`
  - Fetch a collection: `/api/products?page=2`

---

### 2. **POST** — Create data / perform actions

- **Semantics:** Create a subordinate resource, or trigger a server-side action.
- **Idempotent:** ❌ No. Two identical POSTs may create two different resources.
- **Use cases:**

  - Add a new customer: `POST /api/customers`
  - Submit a form or process a payment.

---

### 3. **PUT** — Replace a resource

- **Semantics:** Full replacement of an existing resource. If resource doesn’t exist, some APIs allow creation.
- **Idempotent:** ✅ Yes. Sending the same PUT repeatedly yields the same result.
- **Use cases:**

  - Update customer details completely: `PUT /api/customers/42`

---

### 4. **PATCH** — Update part of a resource

- **Semantics:** Partial update of fields.
- **Idempotent:** ⚠️ Usually yes, but depends on implementation.
- **Use cases:**

  - Change only a customer’s phone number: `PATCH /api/customers/42`

---

### 5. **DELETE** — Remove a resource

- **Semantics:** Delete a resource.
- **Idempotent:** ✅ Yes. Deleting a resource multiple times results in same state (resource gone).
- **Use cases:**

  - Delete a customer: `DELETE /api/customers/42`

---

### 6. **HEAD** — Get metadata only

- **Semantics:** Same as GET, but returns only headers (no body).
- **Use cases:**

  - Check if resource exists.
  - Validate caching (via `ETag` or `Last-Modified`).

---

## Quick Table: REST Method Semantics

| Method | Safe (no side effects)? | Idempotent? | Common Use                          |
| ------ | ----------------------- | ----------- | ----------------------------------- |
| GET    | ✅ Yes                  | ✅ Yes      | Retrieve resource(s)                |
| POST   | ❌ No                   | ❌ No       | Create new resource, trigger action |
| PUT    | ❌ No (changes data)    | ✅ Yes      | Replace resource                    |
| PATCH  | ❌ No                   | ⚠️ Usually  | Partial update                      |
| DELETE | ❌ No                   | ✅ Yes      | Remove resource                     |
| HEAD   | ✅ Yes                  | ✅ Yes      | Retrieve headers/metadata           |

---

## HTTP Status Codes — The Server’s Reply

Think of status codes as the **API’s body language**. They tell the client what happened.
Grouped by category:

### **1xx — Informational**

Rarely used in APIs. Example: `100 Continue`.

---

### **2xx — Success**

- **200 OK** — Generic success (GET, PUT, PATCH).
- **201 Created** — Resource created successfully (use with POST; include `Location` header).
- **202 Accepted** — Request accepted but processing async (common in long-running jobs).
- **204 No Content** — Success with no body (DELETE, PUT when no response needed).

---

### **3xx — Redirection**

- Rare in APIs, but `304 Not Modified` is important:

  - Used with caching (`ETag`, `If-None-Match`).
  - Tells client: “You already have the latest version.”

---

### **4xx — Client Errors**

These indicate a problem with the request.

- **400 Bad Request** — Invalid syntax or malformed request.
- **401 Unauthorized** — Missing/invalid authentication.
- **403 Forbidden** — Authenticated but not allowed.
- **404 Not Found** — Resource doesn’t exist.
- **405 Method Not Allowed** — Method not supported on that resource.
- **409 Conflict** — Business conflict (e.g., booking same seat twice).
- **422 Unprocessable Entity** — Validation failed (useful for semantic errors).

---

### **5xx — Server Errors**

These indicate the server failed to fulfill a valid request.

- **500 Internal Server Error** — Generic failure.
- **502 Bad Gateway** — Gateway (e.g., Kong) got invalid response from upstream.
- **503 Service Unavailable** — Service temporarily down/overloaded.
- **504 Gateway Timeout** — Upstream didn’t respond in time.

---

## Mapping Methods & Status Codes Together

- **GET** → 200 (OK), 404 (Not Found), 304 (Not Modified)
- **POST** → 201 (Created), 400 (Bad Request), 409 (Conflict)
- **PUT** → 200 (OK), 204 (No Content), 404 (Not Found)
- **PATCH** → 200 (OK), 204 (No Content), 404 (Not Found)
- **DELETE** → 204 (No Content), 404 (Not Found)

---

## Practical Tips (for your Flask learners)

- Always return the **most specific** status code possible.
- Include helpful error bodies with 4xx responses (e.g., `{ "error": "Invalid email" }`).
- Use `Location` header when creating resources with POST.
- Respect idempotency — design PUT/DELETE so they can be retried safely.
- For long-running tasks, use `202 Accepted` + a polling endpoint.
- Avoid overloading 200 OK for everything — distinguish errors properly.

---

## Summary

- HTTP **methods** define **what the client wants** (CRUD mapped to verbs).
- HTTP **status codes** define **what actually happened** (outcome).
- Used consistently, they make APIs predictable and self-explanatory.

In your Flask training, once students know these, they’ll better understand why we use different route handlers (`GET`, `POST`, etc.) and why setting the right response code is just as important as returning JSON.
